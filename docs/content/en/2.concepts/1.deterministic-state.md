---
title: Deterministic State
description: Learn how OmniPaw creates a mathematical guarantee of agent execution integrity.
navigation:
  icon: i-lucide-binary
seo:
  title: OmniPaw - Deterministic State
  description: Technical deep dive into state hashing, mutation cycles, and finality.
---

# Deterministic State

At the heart of OmniPaw is the concept of **Deterministic State**. In traditional agent frameworks, execution is often a "black box" where you can see the final result but cannot prove exactly how the system arrived there.

OmniPaw transforms this by treating every agent execution as a verifiable sequence of state transitions.

## The Mutation Cycle

Every "Tick" in the OmniPaw kernel follows a rigorous three-step cycle:

1.  **Snapshot**: The kernel takes a cryptographic fingerprint of the current `AgentStore`.
2.  **Execution**: The agent performs a single action (e.g., calling a tool or updating memory).
3.  **Hashed Transition**: The resulting state change is hashed and compared against the 15 Core Invariants.

```text
Snapshot(S_n) + Action(A) -> S_n+1 | Hash(S_n+1)
```

## State Hashing

OmniPaw uses **Deterministic SHA-256 State Hashing**. Every mutation (including metadata updates and hidden context shifts) contributes to the global `StateHash`.

### Why Hashing Matters?

- **Proof of Integrity**: You can prove to an auditor that an agent did not access unauthorized data.
- **Divergence Detection**: During a replay, if a single bit of state differs from the original run, the kernel triggers a `TRACE_DIVERGENCE` panic.
- **Accountability**: Every "hallucination" can be traced back to the exact state of memory that triggered it.

## The Agent Store

Each agent operates within an isolated `AgentStore`. This store is divided into:

| Sub-Store      | Purpose                                           | Isolation       |
| :------------- | :------------------------------------------------ | :-------------- |
| **Ephemeral**  | Short-term working memory for the current task.   | Absolute        |
| **Persistent** | Long-term memory that survives kernel reboots.    | Strictly Salted |
| **Shared**     | Managed context for agent-to-agent collaboration. | Invariant-Gated |

## Deterministic Finality

When a tick completes and the hash is written to the **Write-Ahead Log (WAL)**, the system reaches **Deterministic Finality**. This means the execution is now "canonically frozen"â€”it can be replayed 1,000 times and will yield the exact same trace every time.

Learn more about [Kernel Configuration](/en/concepts/kernel-config).
