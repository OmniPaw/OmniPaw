---
title: Tool Permissions
description: Understand the OmniPaw security model, gates, and isolation layers.
navigation:
  icon: i-lucide-codesandbox
seo:
  title: OmniPaw - Tool Permissions & Sandboxing
  description: Technical specification for the ToolGate, PermissionRegistry, and Docker isolation.
---

# Tool Permissions & Sandboxing

In OmniPaw, agents are never allowed to interact with the host system directly. All external actions pass through the **ToolGate**â€”a strict security intermediary that enforces isolation and permission checks.

## The ToolGate

The `ToolGate` acts as a firewall between the agent and the OS. Before any tool is executed, the gate performs three checks:

1.  **Identity Check**: Is the agent registered and active?
2.  **Permission Check**: Does the agent have the specific `PermissionGrant` for this tool?
3.  **Governance Check**: Does this tool call violate any active kernel invariants?

## Permission Registry

Permissions are granular and must be explicitly declared during agent spawning or via plugin manifests.

```typescript
// Granting specific tool access
kernel.permissions.grant(agentId, "host.fs.read", {
  path: "./data/logs/*",
  mode: "READ_ONLY",
});
```

Common Permission Scopes:

- `host.system.*`: Access to shell commands and OS metrics.
- `host.fs.*`: Filesystem read/write/delete operations.
- `net.http.*`: Outbound networking with URL allow-listing.
- `kernel.plugin.*`: Access to third-party tool extensions.

## Sandboxing Layers

OmniPaw provides multiple levels of isolation for tool execution:

### 1. In-Process (L1)

Tools executed as simple JavaScript functions within the kernel process. Used only for low-risk, pure-logic tools.

### 2. Chroot / Jail (L2)

Filesystem tools are often restricted to a specific root directory, preventing them from traversing the sensitive host OS folders.

### 3. Docker Isolation (L3)

For high-risk tools like `bash` or `python` environments, OmniPaw spawns ephemeral Docker containers.

- **Ephemeral**: The container is destroyed immediately after the tool returns.
- **Resource Capped**: CPU and Memory limits are enforced at the OS level.
- **Network Gated**: Outbound traffic is disabled unless explicitly permitted.

## Invariant Protection

Tool execution is also monitored by the `InvariantChecker`. If a tool attempt to return an excessively large payload that would overflow the `AgentStore` or attempts to mutate a memory address it doesn't own, the kernel will trigger an `INVARIANT_BREACH`.

Next: Explore [AI Integration & Agent Substrate](/en/ai/agent-substrate).
