---
title: Ngwa Ọrụ Adịghị Atụkwasị Obi (Isolated Tool Execution)
description: Mụta otu OmniPaw si agba iwu dị elu (dịka iwu shell, Python) n'ime gburugburu ebe obibi dịpụrụ adịpụ nke ọma.
navigation:
  icon: i-lucide-box
seo:
  title: OmniPaw - Ngwa Ọrụ Adịghị Atụkwasị Obi
  description: Ụkpụrụ nke nkewapụ ngwa ọrụ, forking process, na ndekọ side-effect.
---

# Ngwa Ọrụ Adịghị Atụkwasị Obi (Isolated Tool Execution)

N'usoro onye ọrụ ọdịnala, ngwa ọrụ na-agakarị n'otu ikike ahụ dịka usoro isi (main process). Nke a bụ nnukwu ihe ize ndụ nchekwa. Na OmniPaw, a na-emeso ngwa ọrụ dịka **Ndị Mpụga Adịghị Atụkwasị Obi (Untrusted Externals)**.

Tupu enwee ike ịmalite ngwa ọrụ, a ga-akọwarị ya dịka `IsolatedTool` n'ime `ToolRegistry` nke ihe nchịkwa.

## Ụkpụrụ Nkewapụ Ngwa Ọrụ (Tool Isolation Principles)

Iji hụ na sistemụ nnabata nwere nchekwa, ihe nchịkwa OmniPaw na-amanye ọkwa atọ nke nkewapụ:

1.  **Process Forking**: Ngwa ọrụ na-agba n'usoro dị iche, na-egbochi mmebi ma ọ bụ ncheta mebiri emebi imetụta ihe nchịkwa isi.
2.  **Nkwekọrịta In-Out Doro Anya**: Naanị data kwekọrọ na JSON Schema nke ngwa ọrụ ka a na-ekwe ka ọ banye, ma naanị data nzaghachi ziri ezi ka a na-ekwe ka ọ laghachi n'ime `AgentStore`.
3.  **Ndekọ Side-Effect**: N'usoro **LIVE**, a na-edekọ nsonaazụ ọrụ ngwa ọrụ ọ bụla. N'usoro **REPLAY**, a naghị akpọ ngwa ọrụ ahụ—a na-etinye nsonaazụ e dekọrọ na mbụ n'ọnọdụ ya.

## Ikọwa Ngwa Ọrụ Dịpụrụ Adịpụ

Iji mepụta ngwa ọrụ ọhụrụ, mejuputa interface `IsolatedTool`:

```typescript [tools/fs-tool.ts]
import { IsolatedTool } from "@omnipaw/kernel/tools";

export const readFile = new IsolatedTool({
  name: "read_secure_file",
  description: "Na-agụ ọdịnaya faịlụ n'ime oke sandbox.",
  parameters: {
    type: "object",
    properties: {
      path: { type: "string" },
    },
    required: ["path"],
  },
  handler: async (args) => {
    // A ga-eme handler a n'ime L2 ma ọ bụ L3 sandbox
    return await fs.promises.readFile(args.path, "utf-8");
  },
});
```

## Usoro Ndụ Ngwa Ọrụ (Tool Life Cycle)

Mgbe onye ọrụ rịọrọ ka agbaa ngwa ọrụ, usoro ndị a na-eme:

1.  **Nnwapụta (Validation)**: Ihe nchịkwa na-enyocha na onye ọrụ nwere `PermissionGrant` maka ngwa ọrụ ahụ.
2.  **Nkwadebe Nkewapụ**: Ihe nchịkwa na-akwadọ L2 (Chroot) ma ọ bụ L3 (Docker) sandbox.
3.  **Ọrụ (Execution)**: Ngwa ọrụ na-agba, a tụọkwa mmepụta ya hash.
4.  **Hashed Return**: A tụọ mmepụta ya hash, amụba `StateHash` tupu eweghachiri onye ọrụ ọrụ.

### Ndekọ Mmepụta Ngwa Ọrụ

Nsonaazụ ngwa ọrụ agbakwunyere n'ime component [OmniTracePreview](/ig/getting-started/quickstart). Ị nwere ike ịhụ akụkọ zuru ezu nke ọ bụla n'ime iwu `bash` ma ọ bụ arịrịọ `fetch` n'oge ọ na-eme.

Na-esote: Nyochaa [Ọkwa Sandboxing](/ig/essentials/sandboxing-layers).
